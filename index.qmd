---
title: "Magrit üåè<br>Cartographie th√©matique<br>&nbsp;"
author:
  name: "Matthieu Viry (CNRS - UAR RIATE)"
  email: "matthieu.viry@cnrs.fr"
subtitle: "24 Septembre 2024 - Webinaire MAGIS AR9"
format:
  revealjs:
    theme: solarized
    embed-resources: false
    logo: images/logos-footer-with-magrit.png
    width: 1150
    height: 740
#title-slide-attributes:
#  data-background-image: images/cartouche_baseline_black@4x.png
#  data-background-size: 50%
#  data-background-position: 50% 20%
execute:
  cache: true
css: ['static/style.css']
prefer-html: true
lang: fr
---

# Plan de la pr√©sentation üìù

<br />

1. Magrit nouvelle version
2. D√©monstration
3. Perspectives d'√©volutions

# 1. Magrit... "nouvelle version" ?


## La gen√®se du projet Magrit

<br />

::::{.medium}

:::{.fragment}
- **Contexte** :
  - l'enseignement de la cartographie th√©matique √† l'universit√©
  - la r√©alisation de cartes th√©matiques par un public non-expert (d√©butants, chercheurs dans d'autres disciplines que la g√©ographie, etc.)
:::

:::{.fragment}
- Quels outils pour produire des cartes th√©matiques ? Quels outils pour enseigner la cartographie th√©matique ?
:::

:::{.fragment}
- *PhilCarto*, *QGIS*, *InkScape* / *Adobe Illustrator* ?
:::

<br />

:::{.fragment}
‚ûî En 2016, pas d'outils **simple**, **complet** et **multiplateforme**
:::

::::

---

## La gen√®se du projet Magrit

<br />
<br />

:::{.medium}


- **Objectif : d√©velopper un outil de cartographie th√©matique simple d'utilisation, complet et utilisable sur tous les syst√®mes d'exploitation**

<br />

- Con√ßu et d√©velopp√© √† l'UAR RIATE 

<br />

- Projet financ√© par l'UAR RIATE sur fonds propres, initi√© en 2016 et **rendu public en 2017**

:::


## Magrit v1

- 02/2017 - 07/2024 : **7 ann√©es de bons et loyaux services** üòÖ

:::{.center}
![](images/magrit-v1-screenshot.png){.w900}
:::

## Magrit v2

- **Juillet 2024** : publication de la **version 2** de Magrit ü™©

<br />

- Toujours les m√™mes fonctionnalit√©s classiques : 
  - **Chargement de donn√©es** (GeoJSON, Shapefile, KML, GeoPackage, CSV, Excel, OpenOffice, etc.)
  - **Repr√©sentation cartographique** (choropl√®the, symboles proportionnels, discontinuit√©s, etc.)
  - **Personnalisation des cartes** (l√©gende, titre, √©chelle, etc.)
  - **Export des cartes** (PNG, SVG) et **des donn√©es** (idem formats d'import)
  - **Sauvegarde des projets**

## *Fonctionnalit√©s de repr√©sentation cartographique*

![](images/type/choro.png)

Choropl√®the

## *Fonctionnalit√©s de repr√©sentation cartographique*

![](images/type/choro-histogram.png)

Choropl√®the

## *Fonctionnalit√©s de repr√©sentation cartographique*

![](images/type/categorical-choro.png)

Cat√©gories

## *Fonctionnalit√©s de repr√©sentation cartographique*

![](images/type/categorical-choro-bar-chart.png)

Cat√©gories

## *Fonctionnalit√©s de repr√©sentation cartographique*

![](images/type/example-discontinuity.png)

Discontinuit√©s

## *Fonctionnalit√©s de repr√©sentation cartographique*

![](images/type/prop-symbols-0.png)

Symboles proportionnels

## *Fonctionnalit√©s de repr√©sentation cartographique*

![](images/type/prop-symbols-choro.png)

Symboles proportionnels

## *Fonctionnalit√©s de repr√©sentation cartographique*

![](images/type/prop-symbols-typo.png)

Symboles proportionnels

## *Fonctionnalit√©s de repr√©sentation cartographique*

![](images/type/cartograms.png)

Cartogrammes

## *Fonctionnalit√©s de repr√©sentation cartographique*

![](images/type/grid-0.png)

Carroyages

## *Fonctionnalit√©s de repr√©sentation cartographique*

::::{.columns .medium}

:::{.column width=50%}
![](images/type/aggregation-pts-1.png)
:::

:::{.column width=50%}
![](images/type/aggregation-pts-2.png)
:::

::::

:::{.center}
![](images/type/agg-points.png){.w300}
:::

Aggr√©gation d'un semis de points (choropl√®the ou symboles proportionnels)

## *Fonctionnalit√©s de repr√©sentation cartographique*

![](images/type/smoothed-stewart-pop.png)

Lissage (Potentiel de Stewart, KDE)

## *Fonctionnalit√©s de repr√©sentation cartographique*

![](images/type/link-map.png)

Liens / Flux 

## √Ä combiner et habiller pour obtenir des cartes complexes...

<br />

:::{.center}
![](images/magrit-maps.png){.w1000}
:::

## Magrit v2

<br />C'est donc :

<br />

- Toujours un **outil de cartographie th√©matique simple, complet et disponible sur le Web**... 

<br />

- ... mais avec une **refonte totale de l'interface utilisateur, de la documentation, de l'architecture, et de nombreux ajouts...** üë∑üèª

## Refonte de l'interface utilisateur

<br />

- **Interface plus claire et plus ergonomique** üßëüèº‚Äçüíª *(on esp√®re !)*
- Plus de coh√©rence dans l'interface (boutons, menus, etc.)
- **Th√®me sombre** üåí

<br />

::::{.columns .medium}

:::{.column width=50%}
![](images/magrit-light.png)
:::

:::{.column width=50%}
![](images/magrit-dark.png)
:::

::::

## Nouvelles fonctionnalit√©s de repr√©sentation et d'analyse

### S√©lection attributaire

Cr√©er une nouvelle couche √† partir d'une s√©lection d'entit√©s<br>(sans les NUTS ultra-marins par exemple)...

:::{.center}
![](images/type/selection-attrib.png){.w500}
:::

## Nouvelles fonctionnalit√©s de repr√©sentation et d'analyse

### Aggr√©gation spatiale

:::{.center}
![](images/type/aggregation-1.png)
:::

## Nouvelles fonctionnalit√©s de repr√©sentation et d'analyse

### R√©gression lin√©aire et cartographie des r√©sidus

:::{.center}
![](images/type/linear-reg.png){.w800}
:::

## Nouvelles fonctionnalit√©s de repr√©sentation et d'analyse

### Simplification des g√©om√©tries

:::{.center}
![](images/simplification.gif){.w600}
:::
## Nouvelles fonctionnalit√©s de repr√©sentation et d'analyse

### Calculatrice de champs

- Syntaxe SQL-like (comme dans QGIS) pour calculer des champs √† partir d'autres champs

:::{.center}
![](images/field-calc.png){.w700}
:::

## Nouvelles fonctionnalit√©s de personnalisation

::::{.columns .medium}

:::{.column width=50%}

![](images/tuto2-lgd.png)

:::

:::{.column width=50%}

![](images/legendes.png)

:::

::::


## Mais aussi...

<br />

- **Am√©lioration de la documentation** üìö <br>
  (ajout de tutoriels, etc.)

<p></p>

- **Nouvelles m√©thodes de discr√©tisation** üìè <br>
  (CKMeans, moyennes emboit√©es, etc.)

<p></p>

- **Am√©lioration des √©l√©ments d'habillages** üé® <br>
  (ligne bris√©e / fl√®che, √©chelle, dessin libre, etc.)



## Un respect total de la vie priv√©e


<br />

- **Pas de collecte de donn√©es personnelles** ü•∑üèº <br><br>
  Aucun compte utilisateur, aucun tracker, aucun *cookie*, aucun service tiers (pas de Google Fonts, etc.), pas de donn√©es stock√©es sur un serveur distant ni transf√©r√©es sur le r√©seau, ...

:::{.fragment}

<br/>

### Et une version desktop

- Pour une utilisation hors-ligne, hors du navigateur Web üñ•Ô∏è
- T√©l√©chargement de l'application pour Windows, MacOS ou Linux puis, **pas de connexion Internet requise**

:::

## Un respect total de la vie priv√©e

- Dans la v1...

:::{.center}
![](images/magrit-v1.png){.w400}
:::

## Un respect total de la vie priv√©e

- Dans la v2, version Web...

<br /><br />

:::{.center}
![](images/magrit-v2.png){.w300}
:::


# 2. D√©monstration

## D√©monstration avec des donn√©es ouvertes
### (‚âà 7-10 min)

<br />

- Nous allons r√©aliser une carte th√©matique √† partir de donn√©es ouvertes :
  - **Donn√©es** : [Open Data Ville de Paris](https://opendata.paris.fr/pages/home/)
  - **Objectif** : repr√©senter ...

## Exemple de r√©sultat

:::{.center}
![](images/demo-result.png){.w800}
:::

# 3. Perspectives d'√©volution

## Nouvelles fonctionnalit√©s d'analyse statistiques üìä

- R√©alisation d'**ACP** (Analyse en Composantes Principales)<br>+ **CAH** (Classification Ascendante Hi√©rarchique) 

:::{.center}
![](images/futur-acp-cah.png)
:::

<p style="position: absolute; right: 70px; bottom: 5px;font-size: 0.8em;"><em>Composants en cours<br>de d√©veloppement...</em></p>

## Ajout de templates cartographiques pr√©d√©finis

- Europe et territoires ultra-marins, France M√©tropolitaine + DROM, etc.

:::{.center}
![](images/template-cartographique.png){.w800}
:::

## Am√©lioration des performances

<br />

- Am√©liorer la fluidit√© de l'affichage et de la navigation dans l'interface lors de l'utilisation de gros jeux de donn√©es ‚ö†Ô∏è
  <br><br>
  *(SVG -> Canvas ? WebGL ?)*


## Correction de bugs

<br />

- Corriger les bugs remont√©s par les utilisateur.trice.s... üêû<br>
  *(de nombreux retours depuis Juillet 2024 ! merci √† toutes celles et ceux ayant pris le temps de nous remonter des bugs !)*

- ... et continuer √† publier r√©guli√®rement des mises √† jour üîÑ

:::{.center}
![](images/magrit-releases.png){.w300}
:::

# Merci de votre attention

<br />

**Magrit** : **[https://magrit.cnrs.fr/](https://magrit.cnrs.fr/)**

**D√©p√¥t GitHub** : [https://github.com/riatelab/magrit](https://github.com/riatelab/magrit)

**Supports de formation** : [https://github.com/magrit-formations](https://github.com/magrit-formations)

<br />

**Slides** : [https://riatecom.github.io/Magrit-MagisAR9-2024/](https://riatecom.github.io/Magrit-MagisAR9-2024/)

<br />

_**Contact** : [matthieu.viry@cnrs.fr](mailto:matthieu.viry@cnrs.fr)_

## Et d'un point de vue technique...

:::{.medium}

<br />

- **TypeScript**

- [**SolidJS**](https://www.solidjs.com/) *(React-like)*
- [**D3.js**](https://d3js.org/) (pour la carto, les projections, etc.)

<p></p>


- Plusieurs modules WebAssembly pour les calculs plus lourds :
  - [**gdal3.js**](https://github.com/bugra9/gdal3.js/) (ouverture de fichiers g√©ospatiaux ou tabulaires)
  - [**geos-wasm**](https://github.com/chrispahm/geos-wasm/) (intersection, union, buffer, etc.)
  - [**contour-wasm**](https://github.com/mthh/contour-wasm) (calculs de contours)

<p></p>


- [**GPU.js**](https://github.com/gpujs/gpu.js) pour les calculs sur GPU (potentiel de Stewart, KDE)

<p></p>

- [**Electron**](https://electronjs.org/) pour la version desktop

:::
